### üìÑ ADR-027 : Architecture Spatiale Dynamique (Routing)

**Date :** 10 Janvier 2026
**Statut :** √Ä impl√©menter

**Contexte**
Avec la refonte v3.0, nous avons perdu la logique de placement des fichiers. Actuellement, tout risque d'atterrir en vrac. Le fichier `Structure des Dossiers.md` d√©finit une hi√©rarchie pr√©cise (`00_Inbox`, `10_Zettelkasten`, etc.) qui doit √™tre appliqu√©e programmatiquement par le Cerveau pour √©viter l'entropie.

**D√©cision**
Nous impl√©mentons un **Routeur de Fichiers (File Router)** au sein du module `Librarian`. Chaque note poss√®de un cycle de vie physique li√© √† son emplacement :

1.  **Zone d'Entr√©e (`00_Inbox`)** :
    *   Toute nouvelle note cr√©√©e par l'IA (via interaction vocale ou √©crite) atterrit **obligatoirement** ici.
    *   Tag automatique : `#√©tat/graine`.
2.  **Zone de Connaissance (`10_Zettelkasten`)** :
    *   C'est le "Rhizome". Une note est d√©plac√©e ici par le Jardinier uniquement si elle atteint le stade `#√©tat/sapling` (plus de 2 liens ou contenu valid√©).
    *   L'IA ne peut pas cr√©er directement ici (sauf exception fusion).
3.  **Zone de Synth√®se (`25_Synth√®se`)** :
    *   Contient les documents g√©n√©r√©s par l'IA sur demande explicite (ex: "Fais-moi un r√©sum√© du projet").
    *   Tag automatique : `#type/synth√®se`.
4.  **Zone d'Oubli (`99_Archives`)** :
    *   Destination des notes fusionn√©es ou obsol√®tes (voir ADR-029).
    *   Rien n'est jamais supprim√©, seulement d√©plac√© ici.

**Impl√©mentation Technique**
*   Le `Settings` (Pydantic, ADR-024) doit contenir les chemins absolus vers ces 4 dossiers cl√©s.
*   Le `Librarian` v√©rifie l'existence des dossiers au d√©marrage.

**Justification**
*   **Hygi√®ne Mentale** : S√©parer le bruit (Inbox) du signal (Zettelkasten).
*   **S√©curit√©** : En for√ßant la cr√©ation dans l'Inbox, on permet √† l'humain de valider avant int√©gration dans le graphe permanent.

---

### üìÑ ADR-028 : Cycle de Vie et Automates √† √âtats (Tags)

**Date :** 10 Janvier 2026
**Statut :** √Ä impl√©menter

**Contexte**
Le fichier `00_tags.md` d√©finit une grammaire pr√©cise (`#√©tat/...`, `#action/...`, `#type/...`). Cette logique a √©t√© perdue lors du retrait de la Taxonomie Dewey. Il faut r√©introduire cette "Typologie" sans la rigidit√© de l'ancienne Taxonomie.

**D√©cision**
Le Cerveau (mode Jardinier) devient le garant de l'automate √† √©tats d√©crit dans `00_tags.md`. Il ne s'agit plus de "classer par sujet" (Dewey), mais de "g√©rer l'√©tat".

1.  **Dimensions Obligatoires (Enforced by Code)** :
    *   Chaque note doit avoir au moins un tag `#type/...` et un tag `#√©tat/...`.
    *   Par d√©faut √† la cr√©ation : `#type/concept` et `#√©tat/graine`.
2.  **Logique d'Action (Le Moteur du Jardinier)** :
    *   L'IA scanne les notes pour les tags `#action/...`.
    *   **`#action/√†_d√©finir`** : D√©clenche une t√¢che de g√©n√©ration de contenu (si la note est vide).
    *   **`#action/√†_lier`** : D√©clenche une recherche vectorielle pour proposer des `[[wikilinks]]`.
    *   *R√®gle* : Une fois l'action effectu√©e, l'IA **supprime** le tag d'action.
3.  **Algorithme de Maturation (Promotion)** :
    *   Le Jardinier v√©rifie p√©riodiquement les crit√®res de passage :
    *   *Si* Note dans `Inbox` ET (Liens > 2 OU Mots > 200) -> **D√©placer** vers `10_Zettelkasten` ET Changer tag en `#√©tat/sapling`.

**Justification**
*   **Autonomie** : Le syst√®me sait "quoi faire" en regardant les tags. Il n'attend pas d'ordre explicite.
*   **Gamification Cognitive** : Voir les notes passer de "graine" √† "sapling" donne une mesure tangible de la progression du syst√®me.

---

### üìÑ ADR-029 : Protocole de Fusion Non-Destructive (Merge)

**Date :** 10 Janvier 2026
**Statut :** √Ä impl√©menter

**Contexte**
Le Jardinier doit pouvoir r√©duire la redondance (ex: deux notes "IA" et "Intelligence Artificielle"). Cependant, la suppression pure et simple est risqu√©e (perte de contexte humain). L'ADR-025 mentionne la s√©curit√©, cet ADR d√©taille le protocole exact.

**D√©cision**
La fusion de deux concepts (Source A -> Cible B) suit un protocole strict et irr√©versible, ex√©cut√© par le Jardinier (Priorit√© Basse).

**Protocole "Absorption" :**
1.  **Lecture** : Le contenu de A est lu int√©gralement.
2.  **Append (Cible B)** :
    *   Le contenu de A est ajout√© √† la fin de B, dans une section d√©di√©e :
        ```markdown
        ### üîó Archives Fusionn√©es : [[Titre de A]]
        > [Contenu original de A copi√© ici]
        ```
    *   Les m√©tadonn√©es (Tags) de A sont fusionn√©es dans B (Union des sets).
3.  **Archivage (Source A)** :
    *   Le fichier A est vid√© de son contenu et remplac√© par un "Pointeur" :
        ```markdown
        ---
        tags: [#√©tat/archiv√©, #redirection]
        ---
        ‚ö†Ô∏è Cette note a √©t√© fusionn√©e dans [[Titre de B]].
        ```
    *   Le fichier A est d√©plac√© physiquement dans `99_Archives`.
4.  **Mise √† jour du Graphe** :
    *   En RAM, le n≈ìud A transmet tout son poids accumul√© au n≈ìud B (Transfert de masse).

**Justification**
*   **Z√©ro Perte** : Le texte original de A est pr√©serv√© dans le corps de B.
*   **Tra√ßabilit√©** : On sait d'o√π vient l'information.
*   **Int√©grit√© des Liens** : Si d'autres notes pointaient vers A, elles pointent maintenant vers une note archiv√©e qui redirige vers B. (C'est pr√©f√©rable √† casser les liens ou parser tout le vault pour renommer).

---

### R√©sum√© des interactions syst√®me (v3.0)

1.  **Oreille/Clavier** -> **Cerveau** -> Cr√©e `Note.md` dans `00_Inbox` (Tags: `#graine`, `#action/√†_d√©finir`).
2.  **Boucle de Fond (Jardinier)** :
    *   D√©tecte `#action/√†_d√©finir`.
    *   G√©n√®re une d√©finition dans la `<!-- AI_GARDEN_ZONE -->`.
    *   Retire `#action/√†_d√©finir`.
    *   Ajoute `#action/√†_lier`.
3.  **Boucle Suivante** :
    *   D√©tecte `#action/√†_lier`.
    *   Trouve des voisins vectoriels. Ajoute des liens.
    *   Retire `#action/√†_lier`.
    *   V√©rifie crit√®res : Liens > 2 ? Oui.
    *   **Action** : D√©place `Note.md` vers `10_Zettelkasten`, change tag en `#sapling`.
